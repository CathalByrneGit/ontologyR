<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Official Statistics: Governing Definitions That Matter • ontologyR</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Official Statistics: Governing Definitions That Matter">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">ontologyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-guides" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Guides</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-guides">
<li><h6 class="dropdown-header" data-toc-skip>Conceptual Overview</h6></li>
    <li><a class="dropdown-item" href="../articles/what-is-an-ontology.html">What is an Ontology?</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Getting Started</h6></li>
    <li><a class="dropdown-item" href="../articles/introduction.html">Introduction</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Core Features</h6></li>
    <li><a class="dropdown-item" href="../articles/datasets-and-materialization.html">Datasets &amp; Materialization</a></li>
    <li><a class="dropdown-item" href="../articles/transforms-and-lineage.html">Transforms &amp; Lineage</a></li>
    <li><a class="dropdown-item" href="../articles/governance-gates.html">Governance Gates</a></li>
    <li><a class="dropdown-item" href="../articles/templates-and-inheritance.html">Templates and Inheritance</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Complete Examples</h6></li>
    <li><a class="dropdown-item" href="../articles/end-to-end-workflow.html">End-to-End Workflow (Healthcare)</a></li>
    <li><a class="dropdown-item" href="../articles/official-statistics.html">Official Statistics (Labour Force)</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CathalByrneGit/ontologyR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Official Statistics: Governing Definitions That Matter</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/CathalByrneGit/ontologyR/blob/main/vignettes/official-statistics.Rmd" class="external-link"><code>vignettes/official-statistics.Rmd</code></a></small>
      <div class="d-none name"><code>official-statistics.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="why-official-statistics-need-governed-definitions">Why Official Statistics Need Governed Definitions<a class="anchor" aria-label="anchor" href="#why-official-statistics-need-governed-definitions"></a>
</h2>
<p>When a national statistics office reports that “unemployment fell to
4.2%”, that single number carries enormous weight. Policy decisions,
budget allocations, and political debates all hinge on it.</p>
<p>But what does “unemployed” actually mean?</p>
<ul>
<li>Must someone be actively seeking work?</li>
<li>What counts as “actively seeking”?</li>
<li>Are discouraged workers included?</li>
<li>What about gig economy workers with irregular hours?</li>
</ul>
<p>Different answers to these questions produce different unemployment
rates — potentially by several percentage points. <strong>The definition
IS the statistic.</strong></p>
<p>This vignette shows how ontologyR helps statistical agencies:</p>
<ol style="list-style-type: decimal">
<li>
<strong>Document definitions explicitly</strong> — no more buried
footnotes</li>
<li>
<strong>Version definitions over time</strong> — track
methodological changes</li>
<li>
<strong>Test definitions against reality</strong> — catch when
proxies drift</li>
<li>
<strong>Govern changes properly</strong> — require approval before
publishing</li>
<li>
<strong>Maintain international comparability</strong> — manage
multiple scopes</li>
</ol>
<hr>
</div>
<div class="section level2">
<h2 id="scenario-labour-force-statistics">Scenario: Labour Force Statistics<a class="anchor" aria-label="anchor" href="#scenario-labour-force-statistics"></a>
</h2>
<p>You’re the methodology team at a national statistics office. You need
to manage definitions for the Labour Force Survey (LFS), ensuring:</p>
<ul>
<li>Consistency with ILO international standards</li>
<li>Adaptation for national context</li>
<li>Historical comparability</li>
<li>Quality assurance before publication</li>
</ul>
<p>Let’s build this system.</p>
<hr>
</div>
<div class="section level2">
<h2 id="phase-1-setting-up-the-survey-infrastructure">Phase 1: Setting Up the Survey Infrastructure<a class="anchor" aria-label="anchor" href="#phase-1-setting-up-the-survey-infrastructure"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CathalByrneGit/ontologyR" class="external-link">ontologyR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to the statistics office ontology database</span></span>
<span><span class="fu"><a href="../reference/ont_connect.html">ont_connect</a></span><span class="op">(</span><span class="st">"labour_force_ontology.duckdb"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># In reality, this would be your survey microdata warehouse</span></span>
<span><span class="co"># Here we simulate LFS respondent data</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbWriteTable.html" class="external-link">dbWriteTable</a></span><span class="op">(</span><span class="fu"><a href="../reference/ont_get_connection.html">ont_get_connection</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"lfs_respondents"</span>, <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span></span>
<span>  respondent_id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"R"</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10000</span><span class="op">)</span>,</span>
<span>  age <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">16</span><span class="op">:</span><span class="fl">75</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  worked_last_week <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.6</span>, <span class="fl">0.4</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  hours_worked <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">worked_last_week</span>, <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">50</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span>,</span>
<span>  has_job_attached <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.7</span>, <span class="fl">0.3</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  sought_work_4weeks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.3</span>, <span class="fl">0.7</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  available_within_2weeks <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.8</span>, <span class="fl">0.2</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  reason_not_seeking <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"discouraged"</span>, <span class="st">"family"</span>, <span class="st">"student"</span>, <span class="st">"retired"</span>, <span class="st">"other"</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>                               <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  education_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"primary"</span>, <span class="st">"secondary"</span>, <span class="st">"tertiary"</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  region <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Capital"</span>, <span class="st">"North"</span>, <span class="st">"South"</span>, <span class="st">"East"</span>, <span class="st">"West"</span><span class="op">)</span>, <span class="fl">10000</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>  survey_wave <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2024Q1"</span>, <span class="st">"2024Q2"</span>, <span class="st">"2024Q3"</span>, <span class="st">"2024Q4"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">2500</span><span class="op">)</span></span>
<span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Register source dataset</span></span>
<span><span class="fu"><a href="../reference/ont_register_dataset.html">ont_register_dataset</a></span><span class="op">(</span></span>
<span>  dataset_id <span class="op">=</span> <span class="st">"ds_lfs_respondents"</span>,</span>
<span>  dataset_name <span class="op">=</span> <span class="st">"Labour Force Survey Respondents"</span>,</span>
<span>  physical_name <span class="op">=</span> <span class="st">"lfs_respondents"</span>,</span>
<span>  dataset_type <span class="op">=</span> <span class="st">"source"</span>,</span>
<span>  owner <span class="op">=</span> <span class="st">"social_statistics_division"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Quarterly LFS microdata, respondent level"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Register the object type</span></span>
<span><span class="fu"><a href="../reference/ont_register_object.html">ont_register_object</a></span><span class="op">(</span></span>
<span>  object_type <span class="op">=</span> <span class="st">"LFS_Respondent"</span>,</span>
<span>  table_name <span class="op">=</span> <span class="st">"lfs_respondents"</span>,</span>
<span>  pk_column <span class="op">=</span> <span class="st">"respondent_id"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Individual respondent in the Labour Force Survey"</span>,</span>
<span>  owner_domain <span class="op">=</span> <span class="st">"labour_statistics"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="phase-2-defining-ilo-compliant-concepts">Phase 2: Defining ILO-Compliant Concepts<a class="anchor" aria-label="anchor" href="#phase-2-defining-ilo-compliant-concepts"></a>
</h2>
<p>The International Labour Organization (ILO) provides standard
definitions. We’ll implement these as our baseline.</p>
<div class="section level3">
<h3 id="employment-definition">Employment Definition<a class="anchor" aria-label="anchor" href="#employment-definition"></a>
</h3>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Define the employment concept</span></span>
<span><span class="fu"><a href="../reference/ont_define_concept.html">ont_define_concept</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"employed"</span>,</span>
<span>  object_type <span class="op">=</span> <span class="st">"LFS_Respondent"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Person is employed according to ILO definition"</span>,</span>
<span>  owner_domain <span class="op">=</span> <span class="st">"labour_statistics"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ILO standard: Worked at least 1 hour in reference week, OR temporarily absent from job</span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"employed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"worked_last_week = TRUE OR (has_job_attached = TRUE AND worked_last_week = FALSE)"</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"ILO 19th ICLS definition: worked 1+ hours OR temporarily absent with job attachment"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># National adaptation: Same core, but restricted to working age (16-64)</span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"employed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"national_headline"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"(worked_last_week = TRUE OR has_job_attached = TRUE) AND age BETWEEN 16 AND 64"</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"National headline rate uses 16-64 working age population"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="unemployment-definition">Unemployment Definition<a class="anchor" aria-label="anchor" href="#unemployment-definition"></a>
</h3>
<p>This is where it gets interesting — unemployment has more nuance.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ont_define_concept.html">ont_define_concept</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  object_type <span class="op">=</span> <span class="st">"LFS_Respondent"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Person is unemployed according to standard definition"</span>,</span>
<span>  owner_domain <span class="op">=</span> <span class="st">"labour_statistics"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># ILO standard unemployment (strict)</span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">    worked_last_week = FALSE</span></span>
<span><span class="st">    AND has_job_attached = FALSE</span></span>
<span><span class="st">    AND sought_work_4weeks = TRUE</span></span>
<span><span class="st">    AND available_within_2weeks = TRUE</span></span>
<span><span class="st">    AND age &gt;= 16</span></span>
<span><span class="st">  "</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"ILO 19th ICLS: without work, seeking work, available for work"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Extended unemployment including discouraged workers</span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"extended_measure"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">    worked_last_week = FALSE</span></span>
<span><span class="st">    AND has_job_attached = FALSE</span></span>
<span><span class="st">    AND (</span></span>
<span><span class="st">      (sought_work_4weeks = TRUE AND available_within_2weeks = TRUE)</span></span>
<span><span class="st">      OR reason_not_seeking = 'discouraged'</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">    AND age &gt;= 16</span></span>
<span><span class="st">  "</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"Extended measure includes discouraged workers per Eurostat LFS guidelines"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="labour-force-and-derived-rates">Labour Force and Derived Rates<a class="anchor" aria-label="anchor" href="#labour-force-and-derived-rates"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ont_define_concept.html">ont_define_concept</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"in_labour_force"</span>,</span>
<span>  object_type <span class="op">=</span> <span class="st">"LFS_Respondent"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Person is in the labour force (employed or unemployed)"</span>,</span>
<span>  owner_domain <span class="op">=</span> <span class="st">"labour_statistics"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"in_labour_force"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">    age &gt;= 16 AND (</span></span>
<span><span class="st">      worked_last_week = TRUE</span></span>
<span><span class="st">      OR has_job_attached = TRUE</span></span>
<span><span class="st">      OR (sought_work_4weeks = TRUE AND available_within_2weeks = TRUE)</span></span>
<span><span class="st">    )</span></span>
<span><span class="st">  "</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"Labour force = employed + unemployed"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Underemployment (wants more hours)</span></span>
<span><span class="fu"><a href="../reference/ont_define_concept.html">ont_define_concept</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"underemployed"</span>,</span>
<span>  object_type <span class="op">=</span> <span class="st">"LFS_Respondent"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Employed but working fewer hours than desired"</span>,</span>
<span>  owner_domain <span class="op">=</span> <span class="st">"labour_statistics"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"underemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"national_headline"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">    worked_last_week = TRUE</span></span>
<span><span class="st">    AND hours_worked &lt; 35</span></span>
<span><span class="st">    AND available_within_2weeks = TRUE</span></span>
<span><span class="st">  "</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"Part-time workers available and wanting more hours"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="phase-3-quality-assurance-through-auditing">Phase 3: Quality Assurance Through Auditing<a class="anchor" aria-label="anchor" href="#phase-3-quality-assurance-through-auditing"></a>
</h2>
<p>Before publishing statistics, methodology teams should verify that
definitions capture what they intend.</p>
<div class="section level3">
<h3 id="sampling-for-expert-review">Sampling for Expert Review<a class="anchor" aria-label="anchor" href="#sampling-for-expert-review"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Sample respondents classified as unemployed for expert review</span></span>
<span><span class="va">unemployed_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_sample_for_audit.html">ont_sample_for_audit</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  concept_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">42</span>  <span class="co"># Reproducible sample</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sample edge cases: not seeking but potentially discouraged</span></span>
<span><span class="va">edge_cases</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_sample_for_audit.html">ont_sample_for_audit</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  n <span class="op">=</span> <span class="fl">30</span>,</span>
<span>  where <span class="op">=</span> <span class="st">"sought_work_4weeks = FALSE AND reason_not_seeking IS NOT NULL"</span>,</span>
<span>  concept_value <span class="op">=</span> <span class="cn">FALSE</span>  <span class="co"># System says "not unemployed"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="recording-expert-judgments">Recording Expert Judgments<a class="anchor" aria-label="anchor" href="#recording-expert-judgments"></a>
</h3>
<p>Labour statisticians review individual cases against the full
questionnaire.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Expert reviews case R1234: System says unemployed, expert agrees</span></span>
<span><span class="fu"><a href="../reference/ont_record_audit.html">ont_record_audit</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  object_key <span class="op">=</span> <span class="st">"R1234"</span>,</span>
<span>  system_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reviewer_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reviewer_id <span class="op">=</span> <span class="st">"senior_methodologist"</span>,</span>
<span>  notes <span class="op">=</span> <span class="st">"Clear case: actively seeking, sent 5 applications last week"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Expert reviews case R5678: System says unemployed, but expert disagrees!</span></span>
<span><span class="fu"><a href="../reference/ont_record_audit.html">ont_record_audit</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  object_key <span class="op">=</span> <span class="st">"R5678"</span>,</span>
<span>  system_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reviewer_value <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  reviewer_id <span class="op">=</span> <span class="st">"senior_methodologist"</span>,</span>
<span>  notes <span class="op">=</span> <span class="st">"Respondent waiting to start job next month - should be employed (job attached)"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Batch import from expert review spreadsheet</span></span>
<span><span class="va">audit_results</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu">read_csv</span><span class="op">(</span><span class="st">"expert_review_q4_2024.csv"</span><span class="op">)</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_len</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">audit_results</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ont_record_audit.html">ont_record_audit</a></span><span class="op">(</span></span>
<span>    concept_id <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">concept</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    scope <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">scope</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    version <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">version</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    object_key <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">respondent_id</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    system_value <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">system_classification</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    reviewer_value <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">expert_classification</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    reviewer_id <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">reviewer</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>    notes <span class="op">=</span> <span class="va">audit_results</span><span class="op">$</span><span class="va">notes</span><span class="op">[</span><span class="va">i</span><span class="op">]</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="checking-audit-results">Checking Audit Results<a class="anchor" aria-label="anchor" href="#checking-audit-results"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># How well does our definition match expert judgment?</span></span>
<span><span class="fu"><a href="../reference/ont_audit_summary.html">ont_audit_summary</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; -- Audit Summary: unemployed@ilo_standard v1 --</span></span>
<span><span class="co">#&gt; i Total audits: 80</span></span>
<span><span class="co">#&gt; i Agreements: 72 (90%)</span></span>
<span><span class="co">#&gt; i Disagreements: 8 (10%)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; Most common disagreement reasons:</span></span>
<span><span class="co">#&gt;   - Job attachment edge cases: 5</span></span>
<span><span class="co">#&gt;   - Availability interpretation: 2</span></span>
<span><span class="co">#&gt;   - Seeking work definition: 1</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="phase-4-detecting-and-managing-drift">Phase 4: Detecting and Managing Drift<a class="anchor" aria-label="anchor" href="#phase-4-detecting-and-managing-drift"></a>
</h2>
<p>Over time, definitions can drift from reality. New forms of work
emerge, survey questions evolve, or classifier behavior changes.</p>
<div class="section level3">
<h3 id="setting-up-drift-monitoring">Setting Up Drift Monitoring<a class="anchor" aria-label="anchor" href="#setting-up-drift-monitoring"></a>
</h3>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if unemployment definition is drifting</span></span>
<span><span class="va">drift_result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_detect_drift.html">ont_detect_drift</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  threshold <span class="op">=</span> <span class="fl">0.10</span>,  <span class="co"># Alert if &gt;10% disagreement</span></span>
<span>  min_audits <span class="op">=</span> <span class="fl">50</span>,</span>
<span>  window_days <span class="op">=</span> <span class="fl">90</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="va">drift_result</span><span class="op">$</span><span class="va">ok</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_warning</a></span><span class="op">(</span><span class="st">"DRIFT DETECTED in unemployment definition!"</span><span class="op">)</span></span>
<span>  <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Disagreement rate: {drift_result$disagreement_rate}"</span><span class="op">)</span></span>
<span>  <span class="fu">cli</span><span class="fu">::</span><span class="fu"><a href="https://cli.r-lib.org/reference/cli_alert.html" class="external-link">cli_alert_info</a></span><span class="op">(</span><span class="st">"Consider methodology review before next publication"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># View overall drift status across all concepts</span></span>
<span><span class="fu"><a href="../reference/ont_drift_status.html">ont_drift_status</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; -- Drift Status Summary --</span></span>
<span><span class="co">#&gt; v employed@ilo_standard v1: OK (5% disagreement, 120 audits)</span></span>
<span><span class="co">#&gt; v employed@national_headline v1: OK (6% disagreement, 85 audits)</span></span>
<span><span class="co">#&gt; ! unemployed@ilo_standard v1: WARNING (12% disagreement, 80 audits)</span></span>
<span><span class="co">#&gt; v in_labour_force@ilo_standard v1: OK (4% disagreement, 100 audits)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="investigating-drift">Investigating Drift<a class="anchor" aria-label="anchor" href="#investigating-drift"></a>
</h3>
<p>When drift is detected, investigate the patterns.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get disagreeing cases</span></span>
<span><span class="va">disagreements</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_get_audits.html">ont_get_audits</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">system_value</span> <span class="op">!=</span> <span class="va">reviewer_value</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Analyze patterns</span></span>
<span><span class="va">disagreements</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">lfs_respondents</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"object_key"</span> <span class="op">=</span> <span class="st">"respondent_id"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">has_job_attached</span>, <span class="va">sought_work_4weeks</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    pct_system_true <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">system_value</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 x 4</span></span>
<span><span class="co">#&gt;   has_job_attached sought_work_4weeks     n pct_system_true</span></span>
<span><span class="co">#&gt;   &lt;lgl&gt;            &lt;lgl&gt;              &lt;int&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 FALSE            TRUE                   3           1.0</span></span>
<span><span class="co">#&gt; 2 TRUE             FALSE                  5           0.0   # &lt;-- Problem area!</span></span>
<span></span>
<span><span class="co"># The issue: People with job attachment but not working/seeking</span></span>
<span><span class="co"># Our SQL says "not unemployed", experts say "should check job status"</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="resolving-drift">Resolving Drift<a class="anchor" aria-label="anchor" href="#resolving-drift"></a>
</h3>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create improved definition based on investigation</span></span>
<span><span class="fu"><a href="../reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"</span></span>
<span><span class="st">    worked_last_week = FALSE</span></span>
<span><span class="st">    AND (has_job_attached = FALSE OR (has_job_attached = TRUE AND hours_worked = 0))</span></span>
<span><span class="st">    AND sought_work_4weeks = TRUE</span></span>
<span><span class="st">    AND available_within_2weeks = TRUE</span></span>
<span><span class="st">    AND age &gt;= 16</span></span>
<span><span class="st">  "</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"draft"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"v2: Clarified job attachment for zero-hours cases per audit findings"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare versions</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_compare_versions.html">ont_compare_versions</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, v1 <span class="op">=</span> <span class="fl">1</span>, v2 <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="va">comparison</span><span class="op">$</span><span class="va">summary</span></span>
<span><span class="co">#&gt; # A tibble: 1 x 4</span></span>
<span><span class="co">#&gt;   total_objects v1_only v2_only both_true</span></span>
<span><span class="co">#&gt;           &lt;int&gt;   &lt;int&gt;   &lt;int&gt;     &lt;int&gt;</span></span>
<span><span class="co">#&gt; 1         10000      45     120       380</span></span>
<span></span>
<span><span class="co"># v2 captures 120 additional unemployed (zero-hours job attachment cases)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="phase-5-governance-gates-for-publication">Phase 5: Governance Gates for Publication<a class="anchor" aria-label="anchor" href="#phase-5-governance-gates-for-publication"></a>
</h2>
<p>Before publishing official statistics, definitions must pass quality
gates.</p>
<div class="section level3">
<h3 id="configuring-publication-gates">Configuring Publication Gates<a class="anchor" aria-label="anchor" href="#configuring-publication-gates"></a>
</h3>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Create a custom gate for statistical publications</span></span>
<span><span class="fu"><a href="../reference/ont_create_gate.html">ont_create_gate</a></span><span class="op">(</span></span>
<span>  gate_id <span class="op">=</span> <span class="st">"gate_statistical_quality"</span>,</span>
<span>  gate_name <span class="op">=</span> <span class="st">"Statistical Quality Standards"</span>,</span>
<span>  gate_type <span class="op">=</span> <span class="st">"audit_coverage"</span>,</span>
<span>  applies_to <span class="op">=</span> <span class="st">"activation"</span>,</span>
<span>  conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    min_audits <span class="op">=</span> <span class="fl">50</span>,</span>
<span>    min_agreement_rate <span class="op">=</span> <span class="fl">0.90</span>  <span class="co"># 90% agreement required</span></span>
<span>  <span class="op">)</span>,</span>
<span>  severity <span class="op">=</span> <span class="st">"blocking"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Definitions must achieve 90% expert agreement before publication use"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Require methodology committee approval</span></span>
<span><span class="fu"><a href="../reference/ont_create_gate.html">ont_create_gate</a></span><span class="op">(</span></span>
<span>  gate_id <span class="op">=</span> <span class="st">"gate_methodology_approval"</span>,</span>
<span>  gate_name <span class="op">=</span> <span class="st">"Methodology Committee Sign-off"</span>,</span>
<span>  gate_type <span class="op">=</span> <span class="st">"approval_required"</span>,</span>
<span>  applies_to <span class="op">=</span> <span class="st">"activation"</span>,</span>
<span>  conditions <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    min_approvals <span class="op">=</span> <span class="fl">2</span>,</span>
<span>    approver_roles <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"chief_methodologist"</span>, <span class="st">"division_head"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  severity <span class="op">=</span> <span class="st">"blocking"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Major definition changes require methodology committee approval"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="going-through-the-approval-process">Going Through the Approval Process<a class="anchor" aria-label="anchor" href="#going-through-the-approval-process"></a>
</h3>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Check if v2 unemployment can be activated</span></span>
<span><span class="va">gates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_check_all_gates.html">ont_check_all_gates</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">2</span>, <span class="st">"activation"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gates</span><span class="op">$</span><span class="va">overall_passed</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span>
<span></span>
<span><span class="va">gates</span><span class="op">$</span><span class="va">blocking_failures</span></span>
<span><span class="co">#&gt; $gate_statistical_quality</span></span>
<span><span class="co">#&gt;   passed: FALSE</span></span>
<span><span class="co">#&gt;   details: audit_count = 25 (need 50)</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $gate_methodology_approval</span></span>
<span><span class="co">#&gt;   passed: FALSE</span></span>
<span><span class="co">#&gt;   details: approvals = 0 (need 2)</span></span>
<span></span>
<span><span class="co"># Conduct more audits for v2</span></span>
<span><span class="va">v2_sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_sample_for_audit.html">ont_sample_for_audit</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, n <span class="op">=</span> <span class="fl">30</span>, version <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co"># ... expert review process ...</span></span>
<span></span>
<span><span class="co"># Request methodology committee approval</span></span>
<span><span class="fu"><a href="../reference/ont_request_approval.html">ont_request_approval</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">2</span>,</span>
<span>  requested_action <span class="op">=</span> <span class="st">"activate"</span>,</span>
<span>  requested_by <span class="op">=</span> <span class="st">"methodology_team"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; v Created approval request: REQ-20250116-abc123</span></span>
<span></span>
<span><span class="co"># Committee members review and approve</span></span>
<span><span class="fu"><a href="../reference/ont_approve_request.html">ont_approve_request</a></span><span class="op">(</span><span class="st">"REQ-20250116-abc123"</span>, <span class="st">"chief_methodologist"</span>,</span>
<span>                     <span class="st">"Reviewed v2 changes. Aligns with ILO guidance on zero-hours contracts."</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/ont_approve_request.html">ont_approve_request</a></span><span class="op">(</span><span class="st">"REQ-20250116-def456"</span>, <span class="st">"division_head"</span>,</span>
<span>                     <span class="st">"Approved. Impact analysis shows minimal effect on headline rate."</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Now gates pass</span></span>
<span><span class="va">gates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_check_all_gates.html">ont_check_all_gates</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">2</span>, <span class="st">"activation"</span><span class="op">)</span></span>
<span><span class="va">gates</span><span class="op">$</span><span class="va">overall_passed</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span>
<span></span>
<span><span class="co"># Activate for publication use</span></span>
<span><span class="fu"><a href="../reference/ont_activate_version.html">ont_activate_version</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">2</span>, activated_by <span class="op">=</span> <span class="st">"chief_methodologist"</span><span class="op">)</span></span></code></pre></div>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="phase-6-materializing-publication-tables">Phase 6: Materializing Publication Tables<a class="anchor" aria-label="anchor" href="#phase-6-materializing-publication-tables"></a>
</h2>
<p>Official statistics need reproducible, point-in-time outputs.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Materialize unemployment classifications for Q4 2024 publication</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_materialize.html">ont_materialize</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"unemployed"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"ilo_standard"</span>,</span>
<span>  filter_expr <span class="op">=</span> <span class="st">"survey_wave = '2024Q4'"</span>,</span>
<span>  output_table <span class="op">=</span> <span class="st">"pub_unemployed_2024q4"</span>,</span>
<span>  triggered_by <span class="op">=</span> <span class="st">"quarterly_publication"</span>,</span>
<span>  executed_by <span class="op">=</span> <span class="st">"production_team"</span></span>
<span><span class="op">)</span></span>
<span><span class="co">#&gt; v Materialized unemployed to pub_unemployed_2024q4</span></span>
<span><span class="co">#&gt; i 2,500 rows (Q4 respondents)</span></span>
<span></span>
<span><span class="co"># Materialize all labour force concepts for the publication</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">concept</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"employed"</span>, <span class="st">"unemployed"</span>, <span class="st">"in_labour_force"</span>, <span class="st">"underemployed"</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ont_materialize.html">ont_materialize</a></span><span class="op">(</span></span>
<span>    concept_id <span class="op">=</span> <span class="va">concept</span>,</span>
<span>    scope <span class="op">=</span> <span class="st">"national_headline"</span>,</span>
<span>    filter_expr <span class="op">=</span> <span class="st">"survey_wave = '2024Q4'"</span>,</span>
<span>    output_table <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"pub_"</span>, <span class="va">concept</span>, <span class="st">"_2024q4"</span><span class="op">)</span>,</span>
<span>    triggered_by <span class="op">=</span> <span class="st">"quarterly_publication"</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Calculate and store headline rates</span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbExecute.html" class="external-link">dbExecute</a></span><span class="op">(</span><span class="fu"><a href="../reference/ont_get_connection.html">ont_get_connection</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"</span></span>
<span><span class="st">  CREATE TABLE pub_headline_rates_2024q4 AS</span></span>
<span><span class="st">  SELECT</span></span>
<span><span class="st">    'Q4 2024' as period,</span></span>
<span><span class="st">    COUNT(*) FILTER (WHERE e.concept_value) as employed,</span></span>
<span><span class="st">    COUNT(*) FILTER (WHERE u.concept_value) as unemployed,</span></span>
<span><span class="st">    COUNT(*) FILTER (WHERE lf.concept_value) as labour_force,</span></span>
<span><span class="st">    ROUND(100.0 * COUNT(*) FILTER (WHERE u.concept_value) /</span></span>
<span><span class="st">          NULLIF(COUNT(*) FILTER (WHERE lf.concept_value), 0), 1) as unemployment_rate</span></span>
<span><span class="st">  FROM pub_employed_2024q4 e</span></span>
<span><span class="st">  JOIN pub_unemployed_2024q4 u USING (respondent_id)</span></span>
<span><span class="st">  JOIN pub_in_labour_force_2024q4 lf USING (respondent_id)</span></span>
<span><span class="st">"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">DBI</span><span class="fu">::</span><span class="fu"><a href="https://dbi.r-dbi.org/reference/dbGetQuery.html" class="external-link">dbGetQuery</a></span><span class="op">(</span><span class="fu"><a href="../reference/ont_get_connection.html">ont_get_connection</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"SELECT * FROM pub_headline_rates_2024q4"</span><span class="op">)</span></span>
<span><span class="co">#&gt;    period employed unemployed labour_force unemployment_rate</span></span>
<span><span class="co">#&gt; 1 Q4 2024     1847        198         2045               9.7</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="phase-7-full-provenance-for-reproducibility">Phase 7: Full Provenance for Reproducibility<a class="anchor" aria-label="anchor" href="#phase-7-full-provenance-for-reproducibility"></a>
</h2>
<p>When questions arise about published statistics, trace everything
back.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># "Where did the 9.7% unemployment rate come from?"</span></span>
<span><span class="va">prov</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ont_get_provenance.html">ont_get_provenance</a></span><span class="op">(</span><span class="st">"DS-pub_unemployed_2024q4"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># What definition was used?</span></span>
<span><span class="va">prov</span><span class="op">$</span><span class="va">concept</span></span>
<span><span class="co">#&gt; $concept_id</span></span>
<span><span class="co">#&gt; [1] "unemployed"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $scope</span></span>
<span><span class="co">#&gt; [1] "ilo_standard"</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $version</span></span>
<span><span class="co">#&gt; [1] 2</span></span>
<span><span class="co">#&gt;</span></span>
<span><span class="co">#&gt; $sql_expr</span></span>
<span><span class="co">#&gt; [1] "worked_last_week = FALSE AND ..."</span></span>
<span></span>
<span><span class="co"># When was it generated?</span></span>
<span><span class="va">prov</span><span class="op">$</span><span class="va">last_run</span><span class="op">$</span><span class="va">ended_at</span></span>
<span><span class="co">#&gt; [1] "2025-01-15 09:30:00"</span></span>
<span></span>
<span><span class="co"># Who approved this definition?</span></span>
<span><span class="fu"><a href="../reference/ont_get_gate_history.html">ont_get_gate_history</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shows approval chain with timestamps and approvers</span></span>
<span></span>
<span><span class="co"># What was the audit quality?</span></span>
<span><span class="fu"><a href="../reference/ont_audit_summary.html">ont_audit_summary</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="st">"ilo_standard"</span>, <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Shows 92% expert agreement</span></span>
<span></span>
<span><span class="co"># Full lineage</span></span>
<span><span class="fu"><a href="../reference/ont_get_upstream.html">ont_get_upstream</a></span><span class="op">(</span><span class="st">"DS-pub_unemployed_2024q4"</span><span class="op">)</span></span>
<span><span class="co">#&gt; DS-lfs_respondents -&gt; DS-pub_unemployed_2024q4</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="phase-8-managing-international-comparability">Phase 8: Managing International Comparability<a class="anchor" aria-label="anchor" href="#phase-8-managing-international-comparability"></a>
</h2>
<p>Statistical agencies often need multiple versions for different
purposes.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Same concept, different scopes</span></span>
<span><span class="fu"><a href="../reference/ont_list_versions.html">ont_list_versions</a></span><span class="op">(</span><span class="st">"unemployed"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 4 x 5</span></span>
<span><span class="co">#&gt;   concept_id scope             version status     rationale</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;      &lt;chr&gt;               &lt;int&gt; &lt;chr&gt;      &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 unemployed ilo_standard            2 active     ILO 19th ICLS with zero-hours fix</span></span>
<span><span class="co">#&gt; 2 unemployed national_headline       1 active     16-64 age restriction</span></span>
<span><span class="co">#&gt; 3 unemployed extended_measure        1 active     Includes discouraged workers</span></span>
<span><span class="co">#&gt; 4 unemployed eurostat_lfs            1 active     EU-LFS compatible definition</span></span>
<span></span>
<span><span class="co"># Compare scopes for the same quarter</span></span>
<span><span class="va">scopes</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ilo_standard"</span>, <span class="st">"national_headline"</span>, <span class="st">"extended_measure"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">scopes</span>, <span class="kw">function</span><span class="op">(</span><span class="va">s</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="../reference/ont_evaluate.html">ont_evaluate</a></span><span class="op">(</span><span class="st">"unemployed"</span>, <span class="va">s</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarise</a></span><span class="op">(</span></span>
<span>      scope <span class="op">=</span> <span class="va">s</span>,</span>
<span>      unemployed_count <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">concept_value</span><span class="op">)</span>,</span>
<span>      rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fl">100</span> <span class="op">*</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">concept_value</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="op">}</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison_results</span></span>
<span><span class="co">#&gt; # A tibble: 3 x 3</span></span>
<span><span class="co">#&gt;   scope             unemployed_count  rate</span></span>
<span><span class="co">#&gt;   &lt;chr&gt;                        &lt;int&gt; &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 ilo_standard                   823   8.2</span></span>
<span><span class="co">#&gt; 2 national_headline              756   9.7  # Different base (16-64 only)</span></span>
<span><span class="co">#&gt; 3 extended_measure               981  10.3  # Includes discouraged</span></span></code></pre></div>
<hr>
</div>
<div class="section level2">
<h2 id="key-benefits-for-statistical-agencies">Key Benefits for Statistical Agencies<a class="anchor" aria-label="anchor" href="#key-benefits-for-statistical-agencies"></a>
</h2>
<table class="table">
<colgroup>
<col width="36%">
<col width="63%">
</colgroup>
<thead><tr class="header">
<th>Challenge</th>
<th>ontologyR Solution</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>“What does ‘unemployed’ mean exactly?”</td>
<td>Explicit SQL definitions with versioning</td>
</tr>
<tr class="even">
<td>“Why did the methodology change?”</td>
<td>Rationale field + governance log</td>
</tr>
<tr class="odd">
<td>“Is our definition still accurate?”</td>
<td>Audit sampling + drift detection</td>
</tr>
<tr class="even">
<td>“Who approved this for publication?”</td>
<td>Approval workflow + gate checks</td>
</tr>
<tr class="odd">
<td>“Can we reproduce last year’s figures?”</td>
<td>Materialized outputs + provenance</td>
</tr>
<tr class="even">
<td>“How do we compare internationally?”</td>
<td>Multiple scopes per concept</td>
</tr>
</tbody>
</table>
<hr>
</div>
<div class="section level2">
<h2 id="recommendations-for-statistical-offices">Recommendations for Statistical Offices<a class="anchor" aria-label="anchor" href="#recommendations-for-statistical-offices"></a>
</h2>
<div class="section level3">
<h3 id="start-with-international-standards">1. Start with International Standards<a class="anchor" aria-label="anchor" href="#start-with-international-standards"></a>
</h3>
<p>Use ILO, UN, or Eurostat definitions as your
<code>ilo_standard</code> or <code>international</code> scope. This
ensures comparability and provides authoritative rationale.</p>
</div>
<div class="section level3">
<h3 id="document-national-adaptations-explicitly">2. Document National Adaptations Explicitly<a class="anchor" aria-label="anchor" href="#document-national-adaptations-explicitly"></a>
</h3>
<p>Don’t bury adaptations in footnotes. Create separate scopes
(<code>national_headline</code>, <code>national_detailed</code>) with
clear rationale for differences.</p>
</div>
<div class="section level3">
<h3 id="build-auditing-into-the-production-cycle">3. Build Auditing Into the Production Cycle<a class="anchor" aria-label="anchor" href="#build-auditing-into-the-production-cycle"></a>
</h3>
<p>Schedule regular expert review samples. Catch drift before it affects
publications.</p>
</div>
<div class="section level3">
<h3 id="require-approval-for-headline-statistics">4. Require Approval for Headline Statistics<a class="anchor" aria-label="anchor" href="#require-approval-for-headline-statistics"></a>
</h3>
<p>Configure gates that require methodology committee sign-off for
definitions used in headline indicators.</p>
</div>
<div class="section level3">
<h3 id="maintain-full-provenance">5. Maintain Full Provenance<a class="anchor" aria-label="anchor" href="#maintain-full-provenance"></a>
</h3>
<p>When parliamentary questions arrive asking “where did this number
come from?”, you should be able to trace every step.</p>
<hr>
</div>
</div>
<div class="section level2">
<h2 id="next-steps">Next Steps<a class="anchor" aria-label="anchor" href="#next-steps"></a>
</h2>
<ul>
<li>See <code><a href="../articles/what-is-an-ontology.html">vignette("what-is-an-ontology")</a></code> for conceptual
foundations</li>
<li>See <code><a href="../articles/governance-gates.html">vignette("governance-gates")</a></code> for detailed RBAC and
gate configuration</li>
<li>See <code><a href="../articles/transforms-and-lineage.html">vignette("transforms-and-lineage")</a></code> for building
statistical production pipelines</li>
</ul>
<p>Remember: <strong>In official statistics, the definition is the
statistic. Govern it accordingly.</strong></p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cathal Byrne.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
