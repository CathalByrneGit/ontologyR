<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Evidence-Based Ontology Governance for Data Definitions • ontologyR</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Evidence-Based Ontology Governance for Data Definitions">
<meta name="description" content="Provides infrastructure for managing data definitions (ontologies) as versioned, testable hypotheses rather than authoritative decrees. Supports registering object types, defining concepts with SQL expressions, recording audit judgments, detecting definition drift, and implementing evidence-based governance. Designed to make disagreement measurable and prevent silent definition lock-in.">
<meta property="og:description" content="Provides infrastructure for managing data definitions (ontologies) as versioned, testable hypotheses rather than authoritative decrees. Supports registering object types, defining concepts with SQL expressions, recording audit judgments, detecting definition drift, and implementing evidence-based governance. Designed to make disagreement measurable and prevent silent definition lock-in.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ontologyR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/introduction.html">Introduction to ontologyR</a></li>
    <li><a class="dropdown-item" href="articles/what-is-an-ontology.html">What is an Ontology? A Plain-English Guide</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CathalByrneGit/ontologyR/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="ontologyr">ontologyR<a class="anchor" aria-label="anchor" href="#ontologyr"></a>
</h1></div>
<blockquote>
<p>Evidence-based governance for data definitions</p>
</blockquote>
<p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></p>
<div class="section level2">
<h2 id="the-problem">The Problem<a class="anchor" aria-label="anchor" href="#the-problem"></a>
</h2>
<p>Most data problems aren’t about bad data—they’re about <strong>bad definitions</strong>.</p>
<p>When a dashboard says “X patients are ready for discharge”, it’s showing the result of a <strong>rule</strong>, not reality. That rule might be sensible, but once it becomes a target, people adapt to it. The definition doesn’t change, but what it measures does.</p>
<p>This is <strong>ontology drift</strong>: the gradual divergence between what a definition claims to measure and what it actually measures.</p>
</div>
<div class="section level2">
<h2 id="the-solution">The Solution<a class="anchor" aria-label="anchor" href="#the-solution"></a>
</h2>
<p><code>ontologyR</code> treats definitions as <strong>hypotheses, not decrees</strong>:</p>
<ul>
<li>
<strong>Version definitions</strong> — never overwrite, always add new versions</li>
<li>
<strong>Audit definitions</strong> — sample cases and check if definitions match reality</li>
<li>
<strong>Detect drift</strong> — track disagreement rates over time</li>
<li>
<strong>Govern with evidence</strong> — use audit data to inform adoption and deprecation</li>
</ul>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install from GitHub</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"CathalByrneGit/ontologyR"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="two-api-styles">Two API Styles<a class="anchor" aria-label="anchor" href="#two-api-styles"></a>
</h2>
<p>ontologyR offers two equivalent ways to work with ontologies:</p>
<div class="section level3">
<h3 id="style-1-object-based-recommended-for-interactive-use">Style 1: Object-based (recommended for interactive use)<a class="anchor" aria-label="anchor" href="#style-1-object-based-recommended-for-interactive-use"></a>
</h3>
<p>Inspired by <code>ontologyIndex</code>, this feels R-native with <code>$</code> accessors:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CathalByrneGit/ontologyR" class="external-link">ontologyR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create ontology object</span></span>
<span><span class="va">ont</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ontology.html">ontology</a></span><span class="op">(</span><span class="st">":memory:"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Register and define</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">register_object</span><span class="op">(</span><span class="st">"Encounter"</span>, <span class="st">"encounters"</span>, <span class="st">"encounter_id"</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">define_concept</span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"Encounter"</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">add_version</span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, <span class="fl">1</span>, </span>
<span>                <span class="st">"NOT planned_intervention"</span>, status <span class="op">=</span> <span class="st">"active"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Explore with $ syntax</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">ready_for_discharge</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">ready_for_discharge</span><span class="op">$</span><span class="va">flow</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span></span>
<span><span class="co"># Evaluate from version object</span></span>
<span><span class="va">v</span> <span class="op">&lt;-</span> <span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">ready_for_discharge</span><span class="op">$</span><span class="va">flow</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="va">v</span><span class="op">$</span><span class="fu">evaluate</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Audit workflow</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="va">ont</span><span class="op">$</span><span class="fu">sample</span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">record_audit</span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, <span class="fl">1</span>, <span class="st">"E1"</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="st">"reviewer"</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">drift_status</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">disconnect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="style-2-function-based-recommended-for-scriptspackages">Style 2: Function-based (recommended for scripts/packages)<a class="anchor" aria-label="anchor" href="#style-2-function-based-recommended-for-scriptspackages"></a>
</h3>
<p>Explicit functions with database connection management:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/CathalByrneGit/ontologyR" class="external-link">ontologyR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Connect to ontology database</span></span>
<span><span class="fu"><a href="reference/ont_connect.html">ont_connect</a></span><span class="op">(</span><span class="st">":memory:"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Register object type (maps logical name to physical table)</span></span>
<span><span class="fu"><a href="reference/ont_register_object.html">ont_register_object</a></span><span class="op">(</span><span class="st">"Encounter"</span>, <span class="st">"encounters"</span>, <span class="st">"encounter_id"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Define a concept</span></span>
<span><span class="fu"><a href="reference/ont_define_concept.html">ont_define_concept</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"ready_for_discharge"</span>,</span>
<span>  object_type <span class="op">=</span> <span class="st">"Encounter"</span>,</span>
<span>  description <span class="op">=</span> <span class="st">"Patient is ready to leave hospital"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Add a versioned definition</span></span>
<span><span class="fu"><a href="reference/ont_add_version.html">ont_add_version</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"ready_for_discharge"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"flow"</span>,</span>
<span>  version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  sql_expr <span class="op">=</span> <span class="st">"NOT planned_intervention_24h"</span>,</span>
<span>  status <span class="op">=</span> <span class="st">"active"</span>,</span>
<span>  rationale <span class="op">=</span> <span class="st">"Proxy: no planned interventions"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Evaluate the concept</span></span>
<span><span class="va">result</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ont_evaluate.html">ont_evaluate</a></span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, <span class="fl">1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Sample for audit</span></span>
<span><span class="va">sample</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ont_sample_for_audit.html">ont_sample_for_audit</a></span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, n <span class="op">=</span> <span class="fl">20</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Record human judgment</span></span>
<span><span class="fu"><a href="reference/ont_record_audit.html">ont_record_audit</a></span><span class="op">(</span></span>
<span>  concept_id <span class="op">=</span> <span class="st">"ready_for_discharge"</span>,</span>
<span>  scope <span class="op">=</span> <span class="st">"flow"</span>, version <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  object_key <span class="op">=</span> <span class="st">"E123"</span>,</span>
<span>  system_value <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  reviewer_value <span class="op">=</span> <span class="cn">FALSE</span>,  <span class="co"># Disagreement!</span></span>
<span>  reviewer_id <span class="op">=</span> <span class="st">"dr_smith"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check for drift</span></span>
<span><span class="fu"><a href="reference/ont_detect_drift.html">ont_detect_drift</a></span><span class="op">(</span><span class="st">"ready_for_discharge"</span>, <span class="st">"flow"</span>, threshold <span class="op">=</span> <span class="fl">0.15</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View governance status</span></span>
<span><span class="fu"><a href="reference/ont_drift_status.html">ont_drift_status</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="core-concepts">Core Concepts<a class="anchor" aria-label="anchor" href="#core-concepts"></a>
</h2>
<table class="table">
<colgroup>
<col width="40%">
<col width="60%">
</colgroup>
<thead><tr class="header">
<th>Term</th>
<th>Meaning</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>Object Type</strong></td>
<td>A logical entity (e.g., “Encounter”) mapped to a physical table</td>
</tr>
<tr class="even">
<td><strong>Concept</strong></td>
<td>A named definition (e.g., “ready_for_discharge”)</td>
</tr>
<tr class="odd">
<td><strong>Version</strong></td>
<td>A specific SQL expression for a concept, scoped and numbered</td>
</tr>
<tr class="even">
<td><strong>Scope</strong></td>
<td>Context for a definition (e.g., “flow”, “clinical”, “regulatory”)</td>
</tr>
<tr class="odd">
<td><strong>Audit</strong></td>
<td>A human judgment comparing system evaluation to ground truth</td>
</tr>
<tr class="even">
<td><strong>Drift</strong></td>
<td>When disagreement rate exceeds threshold</td>
</tr>
</tbody>
</table>
</div>
<div class="section level2">
<h2 id="api-reference">API Reference<a class="anchor" aria-label="anchor" href="#api-reference"></a>
</h2>
<div class="section level3">
<h3 id="top-level-entry-points">Top-level Entry Points<a class="anchor" aria-label="anchor" href="#top-level-entry-points"></a>
</h3>
<table class="table">
<colgroup>
<col width="43%">
<col width="56%">
</colgroup>
<thead><tr class="header">
<th>Function</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code><a href="reference/ontology.html">ontology()</a></code></td>
<td>
<strong>Recommended</strong>: Create an ontology object with <code>$</code> accessors</td>
</tr>
<tr class="even">
<td><code><a href="reference/ont_connect.html">ont_connect()</a></code></td>
<td>Connect using function-based API</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="object-based-api-ont">Object-based API (<code>ont$...</code>)<a class="anchor" aria-label="anchor" href="#object-based-api-ont"></a>
</h3>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ont</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ontology.html">ontology</a></span><span class="op">(</span><span class="st">"path/to/db.duckdb"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Exploration (returns S3 objects)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span>                           <span class="co"># All concepts</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">my_concept</span>                <span class="co"># Single concept</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">my_concept</span><span class="op">$</span><span class="va">scope</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>     <span class="co"># Specific version</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">objects</span>                            <span class="co"># All object types</span></span>
<span></span>
<span><span class="co"># Actions (return invisibly)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">register_object</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">define_concept</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">add_version</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">activate</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">deprecate</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Queries (return data)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">evaluate</span><span class="op">(</span><span class="va">concept_id</span>, <span class="va">scope</span>, <span class="va">version</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">compare</span><span class="op">(</span><span class="va">concept_id</span>, <span class="va">scope</span>, <span class="va">v1</span>, <span class="va">v2</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">sample</span><span class="op">(</span><span class="va">concept_id</span>, <span class="va">scope</span>, <span class="va">n</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">audit_summary</span><span class="op">(</span><span class="va">concept_id</span>, <span class="va">scope</span>, <span class="va">version</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">drift_status</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Governance</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">check_policy</span><span class="op">(</span><span class="va">action</span>, <span class="va">concept_id</span>, <span class="va">scope</span>, <span class="va">version</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">governance_report</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Utilities</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">sql</span><span class="op">(</span><span class="st">"SELECT ..."</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">refresh</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="fu">disconnect</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="function-based-api-ont_">Function-based API (<code>ont_*()</code>)<a class="anchor" aria-label="anchor" href="#function-based-api-ont_"></a>
</h3>
<div class="section level4">
<h4 id="connection">Connection<a class="anchor" aria-label="anchor" href="#connection"></a>
</h4>
<ul>
<li>
<code><a href="reference/ont_connect.html">ont_connect()</a></code> / <code><a href="reference/ont_disconnect.html">ont_disconnect()</a></code> — Manage database connection</li>
<li>
<code><a href="reference/ont_status.html">ont_status()</a></code> — View connection and content summary</li>
</ul>
</div>
</div>
<div class="section level3">
<h3 id="objects--links">Objects &amp; Links<a class="anchor" aria-label="anchor" href="#objects--links"></a>
</h3>
<ul>
<li>
<code><a href="reference/ont_register_object.html">ont_register_object()</a></code> — Map logical type to table</li>
<li>
<code><a href="reference/ont_register_link.html">ont_register_link()</a></code> — Define relationships</li>
<li>
<code><a href="reference/ont_query_objects.html">ont_query_objects()</a></code> / <code><a href="reference/ont_query_linked.html">ont_query_linked()</a></code> — Query data</li>
</ul>
</div>
<div class="section level3">
<h3 id="concepts">Concepts<a class="anchor" aria-label="anchor" href="#concepts"></a>
</h3>
<ul>
<li>
<code><a href="reference/ont_define_concept.html">ont_define_concept()</a></code> — Create a new concept</li>
<li>
<code><a href="reference/ont_add_version.html">ont_add_version()</a></code> — Add versioned definition</li>
<li>
<code><a href="reference/ont_activate_version.html">ont_activate_version()</a></code> / <code><a href="reference/ont_deprecate_version.html">ont_deprecate_version()</a></code> — Manage lifecycle</li>
<li>
<code><a href="reference/ont_evaluate.html">ont_evaluate()</a></code> — Apply concept to data</li>
<li>
<code><a href="reference/ont_compare_versions.html">ont_compare_versions()</a></code> — Compare definition outputs</li>
</ul>
</div>
<div class="section level3">
<h3 id="auditing">Auditing<a class="anchor" aria-label="anchor" href="#auditing"></a>
</h3>
<ul>
<li>
<code><a href="reference/ont_sample_for_audit.html">ont_sample_for_audit()</a></code> — Get random sample for review</li>
<li>
<code><a href="reference/ont_record_audit.html">ont_record_audit()</a></code> — Record human judgment</li>
<li>
<code><a href="reference/ont_audit_summary.html">ont_audit_summary()</a></code> — View audit statistics</li>
<li>
<code><a href="reference/ont_rolling_disagreement.html">ont_rolling_disagreement()</a></code> — Track disagreement over time</li>
</ul>
</div>
<div class="section level3">
<h3 id="drift-detection">Drift Detection<a class="anchor" aria-label="anchor" href="#drift-detection"></a>
</h3>
<ul>
<li>
<code><a href="reference/ont_check_drift.html">ont_check_drift()</a></code> — Test for drift</li>
<li>
<code><a href="reference/ont_detect_drift.html">ont_detect_drift()</a></code> — Check and create drift event</li>
<li>
<code><a href="reference/ont_list_drift_events.html">ont_list_drift_events()</a></code> — View drift history</li>
<li>
<code><a href="reference/ont_resolve_drift.html">ont_resolve_drift()</a></code> — Close drift event</li>
<li>
<code><a href="reference/ont_drift_status.html">ont_drift_status()</a></code> — Overview across all concepts</li>
</ul>
</div>
<div class="section level3">
<h3 id="governance">Governance<a class="anchor" aria-label="anchor" href="#governance"></a>
</h3>
<ul>
<li>
<code><a href="reference/ont_log_governance.html">ont_log_governance()</a></code> — Record governance action</li>
<li>
<code><a href="reference/ont_get_governance_log.html">ont_get_governance_log()</a></code> — View action history</li>
<li>
<code><a href="reference/ont_check_policy.html">ont_check_policy()</a></code> — Validate proposed action</li>
<li>
<code><a href="reference/ont_deprecation_impact.html">ont_deprecation_impact()</a></code> — Analyze change impact</li>
<li>
<code><a href="reference/ont_governance_report.html">ont_governance_report()</a></code> — Generate status report</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="design-principles">Design Principles<a class="anchor" aria-label="anchor" href="#design-principles"></a>
</h2>
<ol style="list-style-type: decimal">
<li>
<strong>Definitions are hypotheses</strong> — test them, don’t assume they’re right</li>
<li>
<strong>Disagreement is evidence</strong> — audit mismatches are signal, not noise</li>
<li>
<strong>Drift is measurable</strong> — track disagreement rates systematically</li>
<li>
<strong>Governance follows evidence</strong> — block actions on drifting definitions</li>
<li>
<strong>Coexistence over replacement</strong> — multiple versions can be active</li>
</ol>
</div>
<div class="section level2">
<h2 id="learn-more">Learn More<a class="anchor" aria-label="anchor" href="#learn-more"></a>
</h2>
<ul>
<li>
<strong>New to ontologies?</strong> Start with <code><a href="articles/what-is-an-ontology.html">vignette("what-is-an-ontology")</a></code> — a plain-English guide with bakery analogies</li>
<li>
<code><a href="articles/introduction.html">vignette("introduction")</a></code> — Code examples and API walkthrough</li>
<li>
<code>vignette("drift-detection")</code> — Details on detecting definition problems</li>
<li>
<code>vignette("governance")</code> — Managing definition changes</li>
</ul>
</div>
<div class="section level2">
<h2 id="design-notes-tables-vs-classes">Design Notes: Tables vs. Classes<a class="anchor" aria-label="anchor" href="#design-notes-tables-vs-classes"></a>
</h2>
<p>ontologyR uses <strong>tables as the source of truth</strong> but provides <strong>S3 classes for ergonomics</strong>.</p>
<div class="section level3">
<h3 id="why-tables-not-named-lists-like-ontologyindex">Why tables (not named lists like ontologyIndex)?<a class="anchor" aria-label="anchor" href="#why-tables-not-named-lists-like-ontologyindex"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Our problem</th>
<th>Their problem</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Definitions change over time</td>
<td>Ontologies are static</td>
</tr>
<tr class="even">
<td>Need versioning + audit trails</td>
<td>Just hierarchy traversal</td>
</tr>
<tr class="odd">
<td>“Is this definition still valid?”</td>
<td>“Is term A ancestor of B?”</td>
</tr>
<tr class="even">
<td>Scale unknown (could be enterprise)</td>
<td>Fits in memory</td>
</tr>
</tbody>
</table>
<p>Tables give us: - Natural versioning (just add rows) - SQL evaluation (definitions <em>are</em> SQL) - Integration with data lakes (csolake) - Audit queries for free</p>
</div>
<div class="section level3">
<h3 id="why-s3-accessors-on-top">Why S3 accessors on top?<a class="anchor" aria-label="anchor" href="#why-s3-accessors-on-top"></a>
</h3>
<p>Interactive R users expect <code>ont$concepts$foo</code>, not <code>ont_get_concept(con, "foo")</code>.</p>
<p>The hybrid approach: - Database = source of truth - S3 objects = cached views with nice printing - Both APIs use the same tables</p>
</div>
<div class="section level3">
<h3 id="when-to-use-which">When to use which<a class="anchor" aria-label="anchor" href="#when-to-use-which"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Situation</th>
<th>Recommendation</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Interactive exploration</td>
<td><code>ont &lt;- ontology(); ont$concepts</code></td>
</tr>
<tr class="even">
<td>Scripts and packages</td>
<td><code><a href="reference/ont_connect.html">ont_connect(); ont_evaluate(...)</a></code></td>
</tr>
<tr class="odd">
<td>Building pipelines</td>
<td>Function-based (explicit control)</td>
</tr>
<tr class="even">
<td>Teaching / demos</td>
<td>Object-based (less boilerplate)</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="related-work">Related Work<a class="anchor" aria-label="anchor" href="#related-work"></a>
</h2>
<div class="section level3">
<h3 id="comparison-with-ontologyindex">Comparison with ontologyIndex<a class="anchor" aria-label="anchor" href="#comparison-with-ontologyindex"></a>
</h3>
<p><a href="https://cran.r-project.org/package=ontologyIndex" class="external-link">ontologyIndex</a> is excellent for <strong>bio-ontologies</strong> (HPO, GO). Here’s how we differ:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># ontologyIndex: static hierarchy from OBO file</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">hpo</span><span class="op">)</span></span>
<span><span class="va">hpo</span><span class="op">$</span><span class="va">name</span><span class="op">[[</span><span class="st">"HP:0001250"</span><span class="op">]</span><span class="op">]</span>          <span class="co"># "Seizure"</span></span>
<span><span class="fu">get_ancestors</span><span class="op">(</span><span class="va">hpo</span>, <span class="st">"HP:0001250"</span><span class="op">)</span>  <span class="co"># Returns parent terms</span></span>
<span></span>
<span><span class="co"># ontologyR: versioned definitions with governance</span></span>
<span><span class="va">ont</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/ontology.html">ontology</a></span><span class="op">(</span><span class="st">"metrics.duckdb"</span><span class="op">)</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">ready_for_discharge</span><span class="op">$</span><span class="va">flow</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">sql_expr</span>  <span class="co"># "NOT planned_intervention"</span></span>
<span><span class="va">ont</span><span class="op">$</span><span class="va">concepts</span><span class="op">$</span><span class="va">ready_for_discharge</span><span class="op">$</span><span class="va">flow</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span><span class="op">$</span><span class="va">audit_summary</span>  <span class="co"># Drift stats</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="3%">
<col width="55%">
<col width="40%">
</colgroup>
<thead><tr class="header">
<th></th>
<th>ontologyIndex</th>
<th>ontologyR</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Domain</td>
<td>Bio-ontologies</td>
<td>Operational definitions</td>
</tr>
<tr class="even">
<td>Data structure</td>
<td>Named lists</td>
<td>Tables + S3 views</td>
</tr>
<tr class="odd">
<td>Mutability</td>
<td>Read-only</td>
<td>Versioned, auditable</td>
</tr>
<tr class="even">
<td>Key operation</td>
<td>Hierarchy traversal</td>
<td>SQL evaluation + drift detection</td>
</tr>
<tr class="odd">
<td>Persistence</td>
<td>In-memory</td>
<td>Database-backed</td>
</tr>
</tbody>
</table>
<p><strong>Use ontologyIndex for:</strong> Gene Ontology, HPO, disease taxonomies</p>
<p><strong>Use ontologyR for:</strong> KPIs, metrics, business definitions that need governance</p>
</div>
<div class="section level3">
<h3 id="other-influences">Other influences<a class="anchor" aria-label="anchor" href="#other-influences"></a>
</h3>
<ul>
<li>
<strong>Goodhart’s Law</strong> — “When a measure becomes a target, it ceases to be a good measure”</li>
<li>
<strong>Statistical process control</strong> — Treating drift as a measurable signal</li>
<li>
<strong>Data mesh</strong> — Decentralized ownership with standards</li>
<li>Critical analysis of analytics platforms and definition lock-in</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT</p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/CathalByrneGit/ontologyR/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/CathalByrneGit/ontologyR/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ontologyR</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Cathal Byrne <br><small class="roles"> Author, maintainer </small>   </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cathal Byrne.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
