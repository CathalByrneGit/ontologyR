% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/concepts.R
\name{ont_evaluate}
\alias{ont_evaluate}
\title{Evaluate a Concept}
\usage{
ont_evaluate(
  concept_id,
  scope,
  version = NULL,
  filter_expr = NULL,
  collect = TRUE,
  con = NULL
)
}
\arguments{
\item{concept_id}{Character. The concept to evaluate.}

\item{scope}{Character. The scope.}

\item{version}{Integer. The version. If \code{NULL}, uses the active version.}

\item{filter_expr}{Character. Optional SQL WHERE clause to filter objects
before evaluation.}

\item{collect}{Logical. If \code{TRUE} (default), collect results. If \code{FALSE},
return lazy tbl.}

\item{con}{A DBI connection. If \code{NULL}, uses the active connection.}
}
\value{
A tibble (or lazy tbl) with original columns plus \code{concept_value}.
Has "ontology_provenance" attribute with evaluation metadata.
}
\description{
Evaluates a concept version against its object type table, returning
the original data plus a \code{concept_value} column with the evaluation result.
}
\details{
The result includes provenance metadata as attributes.
}
\examples{
ont_connect(":memory:")

# Setup
DBI::dbWriteTable(ont_get_connection(), "encounters", tibble::tibble(
    encounter_id = c("E1", "E2", "E3"),
    planned_intervention_24h = c(TRUE, FALSE, FALSE),
    arrangements_confirmed = c(FALSE, TRUE, FALSE)
))
ont_register_object("Encounter", "encounters", "encounter_id")
ont_define_concept("ready_for_discharge", "Encounter")
ont_add_version("ready_for_discharge", "flow", 1,
    sql_expr = "NOT planned_intervention_24h",
    status = "active")

# Evaluate
result <- ont_evaluate("ready_for_discharge", "flow", 1)
print(result)

# Check provenance
attr(result, "ontology_provenance")

ont_disconnect()

}
