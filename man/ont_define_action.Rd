% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/actions.R
\name{ont_define_action}
\alias{ont_define_action}
\title{Define an Action Type}
\usage{
ont_define_action(
  action_type_id,
  action_name,
  object_type,
  description = NULL,
  trigger_concept = NULL,
  trigger_scope = NULL,
  trigger_condition = NULL,
  parameters = NULL,
  writeback_table = NULL,
  writeback_columns = NULL,
  require_note = FALSE,
  require_approval = FALSE,
  allowed_roles = NULL,
  con = NULL
)
}
\arguments{
\item{action_type_id}{Unique identifier for this action type.}

\item{action_name}{Human-readable name.}

\item{object_type}{Which object type this action applies to.}

\item{description}{Optional description.}

\item{trigger_concept}{Optional concept that enables this action.}

\item{trigger_scope}{Scope of the trigger concept.}

\item{trigger_condition}{SQL condition on concept_value (e.g., "concept_value = TRUE").}

\item{parameters}{List defining parameters: list(param_name = list(type, required, default, values)).}

\item{writeback_table}{Table to write action results to.}

\item{writeback_columns}{List mapping action fields to table columns.}

\item{require_note}{Whether a note is required when executing.}

\item{require_approval}{Whether approval is needed before execution.}

\item{allowed_roles}{Character vector of roles allowed to execute this action.}

\item{con}{Optional DBI connection.}
}
\value{
Invisibly returns the action_type_id.
}
\description{
Creates a new action type that users can execute on objects. Action types
define what parameters are needed, what concept triggers the action (optional),
and where results are written.
}
\examples{
\dontrun{
ont_define_action(
  action_type_id = "escalate_to_manager",
  action_name = "Escalate to Manager",
  object_type = "Patient",
  trigger_concept = "high_risk_patient",
  trigger_scope = "clinical",
  trigger_condition = "concept_value = TRUE",
  parameters = list(
    reason = list(type = "text", required = TRUE),
    priority = list(type = "enum", values = c("normal", "urgent"), default = "normal")
  ),
  writeback_table = "escalations"
)
}

}
